<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title><%= htmlWebpackPlugin.options.title %></title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <script type='text/javascript'
    src='http://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=AhZG3Rcel3EnFjWXMVhyQy8nNhQia-DSIoqfbzik8ahw752pkLbddjoPIXJUBAeJ' 
    async defer></script>

<script type='text/javascript'>
var infobox;
function GetMap()
{
    var map = new Microsoft.Maps.Map('#myMap', {
        credentials: 'AhZG3Rcel3EnFjWXMVhyQy8nNhQia-DSIoqfbzik8ahw752pkLbddjoPIXJUBAeJ'
    });

    //Create an infobox at the center of the map but don't show it.
    infobox = new Microsoft.Maps.Infobox(map.getCenter(), {
          visible: false
    });

    //Assign the infobox to a map instance.
    infobox.setMap(map);

    var pinA = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(-22.979743, -43.408411), {
      icon: '<%= BASE_URL %>truck.svg',
      anchor: new Microsoft.Maps.Point(0, 0),
      title: 'Caminhão A',
      subTitle: 'Queijo Minas'
    });

    pinA.metadata = {
      title: 'Caminhão A',
      description: 'Queijo Minas'
    };

    Microsoft.Maps.Events.addHandler(pinA, 'click', pushpinClicked);
    map.entities.push(pinA);

    var pinB = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(-22.938660, -43.349595), {
        icon: '<%= BASE_URL %>truck.svg',
        anchor: new Microsoft.Maps.Point(0, 0),
        title: 'Caminhão B',
        subTitle: 'Supermercado Guanabara'
    });

    pinB.metadata = {
      title: 'Supermercado Guanabara',
      description: 'Queijo Minas'
    };

    Microsoft.Maps.Events.addHandler(pinB, 'click', pushpinClicked);
    map.entities.push(pinB);

    var pinC = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(-23.010394, -43.351399), {
        icon: '<%= BASE_URL %>fridge.svg',
        anchor: new Microsoft.Maps.Point(0, 0),
        title: 'Quiosque dos amigos'
    });

    pinC.metadata = {
      title: 'Quiosque dos amigos',
      description: 'Queijo Minas'
    };

    Microsoft.Maps.Events.addHandler(pinC, 'click', pushpinClicked);
    map.entities.push(pinC);   

}

function pushpinClicked(e) {
  //Make sure the infobox has metadata to display.
  if (e.target.metadata) {
      //Set the infobox options with the metadata of the pushpin.
      infobox.setOptions({
          location: e.target.getLocation(),
          title: e.target.metadata.title,
          description: e.target.metadata.description,
          visible: true
      });
  }
}
</script>

  </head>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
